function getCookie(a){let b=a+"=",d=document.cookie.split(";");for(let e,c=0;c<d.length;c++){for(e=d[c];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""}async function onsubmit2(){$("#loadingspinner").show();let a=$("#ip_field").val();if(""==a||null==a)return $("#loadingspinner").hide(),void alert("the ip is blank!");let b=await fetch("https://api.mcsrvstat.us/3/"+a),c=await b.json().then(a=>a=a);if(document.querySelector("#raw_data_field").checked)return console.log(c),$("#container").append(`<li><div class="server_slot"><a href="javascript:void(0)"onclick="$(this).parent().parent().remove()">[remove]</a><br><br><textarea readonly width="128"height="128">${JSON.stringify(c,null,4)}</textarea></div></li>`),document.cookie=`lastserverip=${a}`,void $("#loadingspinner").hide();if(c.online){let b=c.icon?c.icon:packpng;let d="";if(0==c.players.online)d="no one";else if(c.players.list&&0<c.players.online){let a=c.players.list;for(let b in a){let c=a[b];d+=`<a href="https://namemc.com/profile/${c.uuid}"><img src="https://crafthead.net/helm/${c.uuid}"height=16>${c.name}</a>,`}0<c.players.online-c.players.list.length&&(d+=` and ${c.players.online-c.players.list.length} anonymous player`,1<c.players.online-c.players.list.length&&(d+="s"))}else d="unknown";$("#container").append(`<li><div class="server_slot"><a class="server_icon"href="${b}"target="_blank"><img src="${b}"height="128"width="128"></a><span><span class="server_name">${a}</span><a href="javascript:void(0)"onclick="$(this).parent().parent().parent().remove()">[remove]</a><br><br><span class="server_motd">${c.motd.clean.join("<br>")}</span><br><br><span class="server_players">players: ${d}</span><br><br><span class="">${new Date(1e3*c.debug.cachetime).toString()}</span></span><span class="server_status"><code>${c.players.online}/${c.players.max}</code></span></div></li>`)}else $("#container").append(`<li><div class="server_slot"><a class="server_icon"href="${packpng}"target="_blank"><img src="${packpng}"height="128"width="128"></a><span><span class="server_name">${a}</span><a href="javascript:void(0)"onclick="$(this).parent().parent().parent().remove()">[remove]</a><br><br><span class="server_motd">offline</span><br><br><span class="server_players"></span><br><br><span class="">${new Date().toString()}</span></span><span class="server_status"><code>0/0</code></span></div></li>`);let d=new Date;return d.setMonth(new Date().getMonth()+12),document.cookie=`lastserverip=${a}; expires=${d.toUTCString()}`,void $("#loadingspinner").hide()}window.addEventListener("load",async function(){const a=new URLSearchParams(window.location.search);a.get("raw")&&"true"==a.get("raw")&&$("#raw_data_field").prop("checked",!0),a.get("ip")?($("#ip_field").val(a.get("ip").trim()),$("form#main_form").submit()):$("#ip_field").val(getCookie("lastserverip")),"light"==getCookie("theme")?($("link#stylesheet").attr("href","light.css"),$("a#light_button").hide(),$("a#dark_button").show()):"dark"==getCookie("theme")&&($("link#stylesheet").attr("href","dark.css"),$("a#dark_button").hide(),$("a#light_button").show()),a.get("tutorial")&&"true"==a.get("tutorial")||$("div#tutorial").hide();let b=await fetch("https://api.github.com/repos/pinmacaroon/mcfetch/commits");try{let a=await b.json().then(a=>a=a);$("span#version_span").html(a[0].sha.slice(0,7)+" by "+a[0].commit.author.name+" at "+new Date(a[0].commit.author.date).toString()+": "+a[0].commit.message)}catch(a){$("span#version_span").html("<i>api error</i>")}$("#loadingspinner").hide()});